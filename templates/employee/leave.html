<!doctype html>
<html lang="en" class="h-full" data-accent="teal" data-bg="gradient">
<head>
  <!-- Early preferences (theme/accent/background) to prevent FOUC -->
  <script>(function(){try{const ls=localStorage;const prefs=JSON.parse(ls.getItem('ih_prefs')||'{}');const theme=prefs.theme||ls.getItem('ih_theme');const accent=prefs.accent||ls.getItem('ih_accent')||'teal';const bg=prefs.bg||ls.getItem('ih_bg')||'gradient';if(theme==='dark'){document.documentElement.classList.add('dark');}document.documentElement.dataset.accent=accent;document.documentElement.dataset.bg=bg;}catch(e){}})();</script>
  <meta name="theme-color" content="#14b8a6" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IntelliHRTrack — Leave & Requests</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind config (darkMode, fonts, animations)
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { inter: ['Inter','ui-sans-serif','system-ui','Segoe UI','Roboto','Helvetica Neue','Arial','Noto Sans','sans-serif'] },
          colors: { brand: { 50:'#f5fbff', 100:'#e6f6ff', 400:'#10b981', 500:'#0ea5a0', 700:'#047857' } },
          boxShadow: { glow: '0 10px 30px -5px rgba(16,185,129,0.35), 0 8px 16px -8px rgba(59,130,246,0.25)' },
          keyframes: { float: { '0%,100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-8px)' } }, shine: { '0%': { backgroundPosition: '-200% 0' }, '100%': { backgroundPosition: '200% 0' } } },
          animation: { float: 'float 8s ease-in-out infinite', shine: 'shine 2.5s linear infinite' }
        }
      }
    };
  </script>
  <script src="https://code.iconify.design/iconify-icon/1.0.8/iconify-icon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root { --accent:#14b8a6; --accent-to:#0ea5a0; --card-bg:rgba(255,255,255,0.6); --card-border:rgba(255,255,255,0.35);
      --noise:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 100"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.035"/></svg>'); }
    html[data-accent="teal"] { --accent:#14b8a6; --accent-to:#0ea5a0; }
    html[data-accent="purple"] { --accent:#8b5cf6; --accent-to:#7c3aed; }
    html[data-accent="rose"] { --accent:#f43f5e; --accent-to:#e11d48; }
    html[data-accent="amber"] { --accent:#f59e0b; --accent-to:#d97706; }
    html[data-bg="gradient"] body::before { content:""; position:fixed; inset:0; z-index:-2; background:
      radial-gradient(800px 400px at 10% -10%, rgba(59,130,246,0.15), transparent 60%),
      radial-gradient(600px 300px at 120% 0%, rgba(20,184,166,0.18), transparent 60%),
      linear-gradient(120deg, rgba(2,6,23,0.03), rgba(2,6,23,0.06)); }
    html[data-bg="image"] body::before { content:""; position:fixed; inset:0; z-index:-2; background:url('https://images.unsplash.com/photo-1531297484001-80022131f5a1?auto=format&fit=crop&w=2100&q=60') center/cover no-repeat fixed; filter:saturate(1.15) brightness(0.95); }
    body::after { content:""; position:fixed; inset:0; pointer-events:none; z-index:-1; background-image:var(--noise); }
    .glass { background: var(--card-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid var(--card-border); }
    .dark .glass { background: rgba(15,23,42,0.6); border-color: rgba(255,255,255,0.08); }
    .gradient-accent { background-image: linear-gradient(135deg, var(--accent), var(--accent-to)); }
    .text-accent { color: var(--accent); }
    .bg-accent { background-color: var(--accent); }
    .neon-divider { height:1px; background: linear-gradient(90deg, transparent, var(--accent), transparent); opacity:.6; }
    .fancy-scroll::-webkit-scrollbar { height:10px; width:10px; }
    .fancy-scroll::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--accent), var(--accent-to)); border-radius:9999px; }
    .fancy-scroll::-webkit-scrollbar-track { background: transparent; }
    .big-scroll { scrollbar-width:auto; scrollbar-color: var(--accent) transparent; }
    .big-scroll::-webkit-scrollbar { width:16px; height:16px; }
    .big-scroll::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--accent), var(--accent-to)); border-radius:12px; border:3px solid transparent; background-clip: content-box; }
    /* Reduced motion & density */
    html.reduce-motion * { animation: none !important; transition-duration: 0.01ms !important; }
    html[data-density="compact"] body { font-size: 0.95rem; }
    /* Reveal on scroll */
    .reveal { opacity: 0; transform: translateY(8px) scale(0.98); transition: opacity .5s ease, transform .5s ease; }
    .in-view { opacity: 1; transform: none; }
    /* Micro-interactions */
    .hover-lift { transition: transform 0.2s ease, box-shadow 0.2s ease; }
    .hover-lift:hover { transform: translateY(-2px); }
    .pulse-subtle { animation: pulse-subtle 3s ease-in-out infinite; }
    @keyframes pulse-subtle { 0%,100%{opacity:1} 50%{opacity:.8} }
    /* Ripple buttons */
    .ripple { position: relative; overflow: hidden; }
    .ripple::after { content:''; position:absolute; inset:0; background: radial-gradient(circle, rgba(255,255,255,0.3) 1%, transparent 1%) center/15000%; opacity:0; transition: opacity .5s; }
    .ripple:active::after { opacity:1; background-size:100%; transition:0s; }
    /* Sidebar resize via CSS var */
    :root { --sidebar: 18rem; }
    @media (min-width: 1024px){
      aside[data-resizable]{ width: var(--sidebar) !important; }
      main[data-shift]{ margin-left: var(--sidebar) !important; }
    }
    /* Toasts */
    #toastHost { position: fixed; top: 16px; right: 16px; display: grid; gap: 10px; z-index: 80; pointer-events: none; }
    .toast { pointer-events: auto; min-width: 220px; max-width: 360px; padding: 10px 12px; border-radius: 12px; box-shadow: 0 10px 20px rgba(2,6,23,.2); border: 1px solid rgba(255,255,255,.35); }
    .toast.info { background: var(--card-bg); }
    .toast.success { background: linear-gradient(135deg, rgba(16,185,129,.15), rgba(20,184,166,.25)); }
    .toast.warn { background: linear-gradient(135deg, rgba(245,158,11,.15), rgba(245,158,11,.28)); }
    .toast.error { background: linear-gradient(135deg, rgba(244,63,94,.15), rgba(244,63,94,.28)); }

    /* Leave page specific accents */
    .calendar-day { transition: all 0.2s ease; }
    .calendar-day:hover { transform: scale(1.05); }
    .leave-vacation { background: linear-gradient(135deg, #dbeafe, #93c5fd); border-left: 4px solid #3b82f6; }
    .dark .leave-vacation { background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 197, 253, 0.1)); }
    .leave-sick { background: linear-gradient(135deg, #fef3c7, #fcd34d); border-left: 4px solid #f59e0b; }
    .dark .leave-sick { background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(252, 211, 77, 0.1)); }
    .leave-emergency { background: linear-gradient(135deg, #fecaca, #fca5a5); border-left: 4px solid #ef4444; }
    .dark .leave-emergency { background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(252, 165, 165, 0.1)); }
    .leave-official { background: linear-gradient(135deg, #ddd6fe, #c4b5fd); border-left: 4px solid #8b5cf6; }
    .dark .leave-official { background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(196, 181, 253, 0.1)); }
    .leave-approved { background: linear-gradient(135deg, #dcfce7, #86efac); border-left: 4px solid #22c55e; }
    .dark .leave-approved { background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(134, 239, 172, 0.1)); }
    .leave-pending { background: linear-gradient(135deg, #fef7cd, #fde047); border-left: 4px solid #eab308; }
    .dark .leave-pending { background: linear-gradient(135deg, rgba(234, 179, 8, 0.2), rgba(253, 224, 71, 0.1)); }
  </style>
</head>
<body class="h-full font-inter bg-gray-50/60 dark:bg-slate-950 text-gray-800 dark:text-gray-100">
  <!-- Decorative blobs -->
  <div class="pointer-events-none fixed -z-10 inset-0 overflow-hidden">
    <div class="absolute -top-24 -left-24 w-80 h-80 rounded-full blur-3xl opacity-40 gradient-accent animate-float"></div>
    <div class="absolute bottom-0 right-0 w-96 h-96 rounded-full blur-3xl opacity-30 bg-gradient-to-br from-blue-500 to-indigo-500 animate-float" style="animation-delay:1s"></div>
  </div>

  <div id="app" class="min-h-screen flex">
    <!-- Sidebar (same as Dashboard) -->
    <aside data-resizable class="hidden lg:flex fixed left-0 top-0 h-screen w-72 flex-col gap-6 p-6 pr-3 overflow-y-auto fancy-scroll big-scroll">
      <div class="glass rounded-2xl p-4 shadow-glow text-slate-800 dark:text-slate-100">
        <div class="flex items-center gap-3">
          <div class="w-11 h-11 rounded-xl gradient-accent text-white flex items-center justify-center font-extrabold shadow-lg">IH</div>
          <div>
            <h1 class="text-lg font-semibold tracking-tight">IntelliHRTrack</h1>
            <p class="text-xs text-gray-500 dark:text-gray-400">Employee Dashboard</p>
          </div>
        </div>
        <div class="neon-divider mt-4"></div>
        <nav class="mt-3">
          <ul class="space-y-1">
            <li><a class="flex items-center gap-3 px-3 py-2 rounded-xl glass hover:shadow-glow transition" href="dashboard.html"><iconify-icon icon="ph:squares-four-duotone" class="text-accent"></iconify-icon> <span class="font-medium">Dashboard</span></a></li>
            <li><a class="flex items-center gap-3 px-3 py-2 rounded-xl glass hover:shadow-glow transition" href="attendance.html"><iconify-icon icon="ph:fingerprint-simple-duotone" class="text-accent"></iconify-icon> <span class="font-medium">Attendance</span></a></li>
            <li><a class="flex items-center gap-3 px-3 py-2 rounded-xl glass hover:shadow-glow transition" href="schedule.html"><iconify-icon icon="ph:calendar-check-duotone" class="text-accent"></iconify-icon> <span>Schedule</span></a></li>
            <li><a class="flex items-center gap-3 px-3 py-2 rounded-xl glass hover:shadow-glow transition" href="leave.html"><iconify-icon icon="ph:airplane-tilt-duotone" class="text-accent"></iconify-icon> <span>Leave &amp; Requests</span></a></li>
            <li><a class="flex items-center gap-3 px-3 py-2 rounded-xl glass hover:shadow-glow transition" href="payroll.html"><iconify-icon icon="ph:currency-dollar-duotone" class="text-accent"></iconify-icon> <span>Payroll</span></a></li>
            <li><a class="flex items-center gap-3 px-3 py-2 rounded-xl glass hover:shadow-glow transition" href="analytics.html"><iconify-icon icon="ph:brain-duotone" class="text-accent"></iconify-icon> <span>My Analytics</span></a></li>
            <li><a class="flex items-center gap-3 px-3 py-2 rounded-xl glass hover:shadow-glow transition" href="notification.html" title="Notifications"><iconify-icon icon="ph:bell-duotone" class="text-accent"></iconify-icon><span>Notifications</span></a></li>
            <li><a class="flex items-center gap-3 px-3 py-2 rounded-xl glass hover:shadow-glow transition" href="user.html" title="Settings & Profile"><iconify-icon icon="ph:user-gear-duotone" class="text-accent"></iconify-icon><span>Settings & Profile</span></a></li>
          </ul>
        </nav>
        <div class="neon-divider my-4"></div>
        <div class="space-y-3">
          <button id="customizeLayout" class="w-full px-3 py-2 text-white rounded-xl gradient-accent hover:shadow-glow ring-1 ring-white/30 transition flex items-center justify-center gap-2"><iconify-icon icon="ph:sliders-duotone"></iconify-icon> <span>Customize Layout</span></button>
          <button id="shortcutsBtn" class="w-full px-3 py-2 rounded-xl glass hover:shadow-glow transition flex items-center justify-center gap-2"><iconify-icon icon="ph:keyboard-duotone"></iconify-icon> <span>Keyboard Shortcuts</span></button>
          <div class="flex items-center justify-between text-sm text-gray-600 dark:text-gray-300">
            <span class="flex items-center gap-2"><iconify-icon icon="ph:sun-dim-duotone" class="hidden dark:inline"></iconify-icon><iconify-icon icon="ph:moon-stars-duotone" class="dark:hidden"></iconify-icon> Light / Dark</span>
            <button id="themeToggle" class="p-2 rounded-xl glass hover:shadow-glow transition flex items-center gap-2"><iconify-icon icon="ph:yin-yang-duotone" class="text-accent"></iconify-icon><span class="text-xs">Toggle</span></button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main data-shift class="flex-1 p-4 md:p-6 lg:p-8 space-y-6 lg:ml-72">
      <!-- Header -->
      <header class="relative overflow-hidden rounded-3xl glass p-6 md:p-8 shadow-lg reveal">
        <div class="absolute inset-0 opacity-40 animate-shine"></div>
        <div class="relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-4">
          <div class="flex items-center gap-4">
            <div class="relative">
              <img class="w-16 h-16 md:w-20 md:h-20 rounded-full object-cover border-4 border-white/50 shadow-lg" src="https://randomuser.me/api/portraits/men/32.jpg" alt="Renzo">
              <div class="absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white"></div>
            </div>
            <div>
              <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">Leave & Requests</h1>
              <p class="text-sm md:text-base text-gray-600 dark:text-gray-300 mt-1">Manage your time off, track balances, and submit requests</p>
              <div class="flex items-center gap-2 mt-2 text-sm">
                <span class="px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full">ID: EMP-8472</span>
                <span class="px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full">Sales Department</span>
              </div>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <button id="mobileMenu" class="lg:hidden p-2 rounded-xl glass" aria-label="Open Menu"><iconify-icon icon="ph:list-duotone"></iconify-icon></button>
            <div class="hidden md:flex items-center gap-2 px-3 py-1 rounded-xl glass text-xs">
              <span id="netDot" class="inline-block w-2.5 h-2.5 rounded-full bg-green-500" title="Online"></span>
              <span id="headerClock">--:--:--</span>
            </div>
            <!-- Header theme toggle mirrors sidebar toggle -->
            <button id="themeToggleHeader" class="p-2 rounded-xl glass hover:shadow-glow transition">
              <iconify-icon icon="ph:sun-dim-duotone" class="hidden dark:inline text-accent"></iconify-icon>
              <iconify-icon icon="ph:moon-stars-duotone" class="dark:hidden text-accent"></iconify-icon>
            </button>
          </div>
        </div>
      </header>

      <!-- Feature 5: Leave Summary Dashboard -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="glass rounded-2xl p-4 shadow transition hover:shadow-lg hover-lift">
          <div class="text-xs text-gray-500 dark:text-gray-400">Total Leaves This Year</div>
          <div class="mt-1 text-2xl font-extrabold">18</div>
          <div class="text-sm text-blue-500 flex items-center gap-1">
            <iconify-icon icon="ph:trend-up-duotone"></iconify-icon>
            <span>+5 from last year</span>
          </div>
        </div>
        
        <div class="glass rounded-2xl p-4 shadow transition hover:shadow-lg hover-lift">
          <div class="text-xs text-gray-500 dark:text-gray-400">Pending Requests</div>
          <div class="mt-1 text-2xl font-extrabold text-amber-600">3</div>
          <div class="text-sm text-amber-500 flex items-center gap-1">
            <iconify-icon icon="ph:clock-duotone"></iconify-icon>
            <span>Awaiting approval</span>
          </div>
        </div>
        
        <div class="glass rounded-2xl p-4 shadow transition hover:shadow-lg hover-lift">
          <div class="text-xs text-gray-500 dark:text-gray-400">Remaining Vacation</div>
          <div class="mt-1 text-2xl font-extrabold">6</div>
          <div class="text-sm text-green-500 flex items-center gap-1">
            <iconify-icon icon="ph:beach-duotone"></iconify-icon>
            <span>days available</span>
          </div>
        </div>
        
        <div class="glass rounded-2xl p-4 shadow transition hover:shadow-lg hover-lift">
          <div class="text-xs text-gray-500 dark:text-gray-400">Approval Rate</div>
          <div class="mt-1 text-2xl font-extrabold text-purple-600">92%</div>
          <div class="text-sm text-purple-500 flex items-center gap-1">
            <iconify-icon icon="ph:check-circle-duotone"></iconify-icon>
            <span>High success rate</span>
          </div>
        </div>
      </div>

  <!-- Balanced two-column layout (was 3 cols with left spanning 2) -->
  <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
        <!-- Left Column -->
  <div class="space-y-6">
          <!-- Feature 1: Leave Application Form -->
          <div class="glass rounded-3xl p-6 shadow-lg reveal">
            <h2 class="text-xl font-bold mb-4">Apply for Leave</h2>
            <div class="space-y-4">
              <!-- Feature 2: Leave Type Selection Dropdown -->
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Leave Type</label>
                <select class="w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 glass py-3 px-4">
                  <option value="">Select leave type...</option>
                  <option value="vacation">Vacation Leave</option>
                  <option value="sick">Sick Leave</option>
                  <option value="emergency">Emergency Leave</option>
                  <option value="official">Official Business</option>
                  <option value="maternity">Maternity Leave</option>
                  <option value="paternity">Paternity Leave</option>
                </select>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Start Date</label>
                  <input type="date" class="w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 glass py-3 px-4">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">End Date</label>
                  <input type="date" class="w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 glass py-3 px-4">
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Duration</label>
                <div class="flex gap-4">
                  <label class="flex items-center">
                    <input type="radio" name="duration" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2" checked>
                    <span class="text-sm text-gray-700 dark:text-gray-300">Full Day</span>
                  </label>
                  <label class="flex items-center">
                    <input type="radio" name="duration" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2">
                    <span class="text-sm text-gray-700 dark:text-gray-300">Half Day (AM)</span>
                  </label>
                  <label class="flex items-center">
                    <input type="radio" name="duration" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2">
                    <span class="text-sm text-gray-700 dark:text-gray-300">Half Day (PM)</span>
                  </label>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Reason</label>
                <textarea class="w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 glass py-3 px-4" rows="3" placeholder="Please provide details for your leave request..."></textarea>
              </div>

              <!-- Feature 9: Upload Supporting Documents -->
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Supporting Documents</label>
                <div class="flex items-center justify-center w-full">
                  <label class="flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer glass hover:border-accent transition-colors">
                    <div class="flex flex-col items-center justify-center pt-5 pb-6">
                      <iconify-icon icon="ph:cloud-arrow-up-duotone" class="text-gray-400 text-2xl mb-2"></iconify-icon>
                      <p class="text-sm text-gray-500 dark:text-gray-400">Click to upload or drag and drop</p>
                      <p class="text-xs text-gray-400 dark:text-gray-500">PDF, DOC, JPG up to 10MB</p>
                    </div>
                    <input type="file" class="hidden" multiple>
                  </label>
                </div>
              </div>

              <div class="flex gap-3 pt-2">
                <button class="flex-1 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition-all ripple">
                  Submit Leave Request
                </button>
                <button class="px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-xl font-medium transition-all ripple">
                  Save as Draft
                </button>
              </div>
            </div>
          </div>

          <!-- Feature 4: Leave Request Status Table -->
          <div class="glass rounded-3xl p-6 shadow-lg reveal">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
              <h2 class="text-xl font-bold">Leave Request History</h2>
              <div class="flex items-center gap-3">
                <select class="px-4 py-2 rounded-xl glass text-sm">
                  <option>All Status</option>
                  <option>Pending</option>
                  <option>Approved</option>
                  <option>Declined</option>
                </select>
                <!-- Feature 11: Request History Export -->
                <button class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl text-sm transition-all ripple flex items-center gap-2">
                  <iconify-icon icon="ph:export-duotone"></iconify-icon>
                  Export
                </button>
              </div>
            </div>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="border-b border-gray-200 dark:border-gray-700">
                    <th class="text-left p-3">Leave Type</th>
                    <th class="text-left p-3">Dates</th>
                    <th class="text-left p-3">Duration</th>
                    <th class="text-left p-3">Status</th>
                    <th class="text-left p-3">Approver</th>
                    <th class="text-left p-3">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                    <td class="p-3">
                      <div class="flex items-center gap-2">
                        <iconify-icon icon="ph:beach-duotone" class="text-blue-500"></iconify-icon>
                        <span>Vacation Leave</span>
                      </div>
                    </td>
                    <td class="p-3">Dec 20 - 23, 2023</td>
                    <td class="p-3">4 days</td>
                    <td class="p-3">
                      <span class="px-2 py-1 bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 text-xs rounded-full">Pending</span>
                    </td>
                    <td class="p-3">Sarah Johnson</td>
                    <td class="p-3">
                      <!-- Feature 8: Cancel Leave Request Option -->
                      <button class="text-red-500 hover:text-red-700 text-xs">Cancel</button>
                    </td>
                  </tr>
                  <tr class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                    <td class="p-3">
                      <div class="flex items-center gap-2">
                        <iconify-icon icon="ph:first-aid-duotone" class="text-amber-500"></iconify-icon>
                        <span>Sick Leave</span>
                      </div>
                    </td>
                    <td class="p-3">Nov 15, 2023</td>
                    <td class="p-3">1 day</td>
                    <td class="p-3">
                      <span class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full">Approved</span>
                    </td>
                    <td class="p-3">Sarah Johnson</td>
                    <td class="p-3">
                      <button class="text-blue-500 hover:text-blue-700 text-xs">View</button>
                    </td>
                  </tr>
                  <tr class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                    <td class="p-3">
                      <div class="flex items-center gap-2">
                        <iconify-icon icon="ph:warning-circle-duotone" class="text-red-500"></iconify-icon>
                        <span>Emergency Leave</span>
                      </div>
                    </td>
                    <td class="p-3">Oct 28, 2023</td>
                    <td class="p-3">1 day</td>
                    <td class="p-3">
                      <span class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full">Approved</span>
                    </td>
                    <td class="p-3">Michael Chen</td>
                    <td class="p-3">
                      <button class="text-blue-500 hover:text-blue-700 text-xs">View</button>
                    </td>
                  </tr>
                  <tr class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                    <td class="p-3">
                      <div class="flex items-center gap-2">
                        <iconify-icon icon="ph:briefcase-duotone" class="text-purple-500"></iconify-icon>
                        <span>Official Business</span>
                      </div>
                    </td>
                    <td class="p-3">Oct 15, 2023</td>
                    <td class="p-3">1 day</td>
                    <td class="p-3">
                      <span class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full">Approved</span>
                    </td>
                    <td class="p-3">Sarah Johnson</td>
                    <td class="p-3">
                      <button class="text-blue-500 hover:text-blue-700 text-xs">View</button>
                    </td>
                  </tr>
                  <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                    <td class="p-3">
                      <div class="flex items-center gap-2">
                        <iconify-icon icon="ph:beach-duotone" class="text-blue-500"></iconify-icon>
                        <span>Vacation Leave</span>
                      </div>
                    </td>
                    <td class="p-3">Sep 5 - 9, 2023</td>
                    <td class="p-3">5 days</td>
                    <td class="p-3">
                      <span class="px-2 py-1 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 text-xs rounded-full">Declined</span>
                    </td>
                    <td class="p-3">Sarah Johnson</td>
                    <td class="p-3">
                      <button class="text-blue-500 hover:text-blue-700 text-xs">View</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- Moved Leave Calendar here from right column for balance -->
          <!-- Feature 7: Leave Calendar View (moved) -->
          <div class="glass rounded-3xl p-6 shadow-lg reveal">
            <h2 class="text-xl font-bold mb-4">Leave Calendar</h2>
            <div class="flex items-center justify-between mb-4">
              <button class="p-2 rounded-lg glass">
                <iconify-icon icon="ph:caret-left-duotone"></iconify-icon>
              </button>
              <h3 class="font-bold">November 2023</h3>
              <button class="p-2 rounded-lg glass">
                <iconify-icon icon="ph:caret-right-duotone"></iconify-icon>
              </button>
            </div>
            <div class="grid grid-cols-7 gap-1 text-center text-xs mb-2">
              <div class="p-2 font-medium">Sun</div>
              <div class="p-2 font-medium">Mon</div>
              <div class="p-2 font-medium">Tue</div>
              <div class="p-2 font-medium">Wed</div>
              <div class="p-2 font-medium">Thu</div>
              <div class="p-2 font-medium">Fri</div>
              <div class="p-2 font-medium">Sat</div>
            </div>
            <div class="grid grid-cols-7 gap-1">
              <div class="calendar-day p-2 text-center text-gray-400">29</div>
              <div class="calendar-day p-2 text-center text-gray-400">30</div>
              <div class="calendar-day p-2 text-center text-gray-400">31</div>
              <div class="calendar-day p-2 text-center">1</div>
              <div class="calendar-day p-2 text-center">2</div>
              <div class="calendar-day p-2 text-center">3</div>
              <div class="calendar-day p-2 text-center">4</div>
              <div class="calendar-day p-2 text-center">5</div>
              <div class="calendar-day p-2 text-center">6</div>
              <div class="calendar-day p-2 text-center">7</div>
              <div class="calendar-day p-2 text-center">8</div>
              <div class="calendar-day p-2 text-center">9</div>
              <div class="calendar-day p-2 text-center">10</div>
              <div class="calendar-day p-2 text-center">11</div>
              <div class="calendar-day p-2 text-center">12</div>
              <div class="calendar-day p-2 text-center">13</div>
              <div class="calendar-day p-2 text-center bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 rounded" title="Sick Leave - Pending">14</div>
              <div class="calendar-day p-2 text-center">15</div>
              <div class="calendar-day p-2 text-center">16</div>
              <div class="calendar-day p-2 text-center">17</div>
              <div class="calendar-day p-2 text-center">18</div>
              <div class="calendar-day p-2 text-center">19</div>
              <div class="calendar-day p-2 text-center">20</div>
              <div class="calendar-day p-2 text-center bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded" title="Vacation Leave - Approved">21</div>
              <div class="calendar-day p-2 text-center bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded" title="Vacation Leave - Approved">22</div>
              <div class="calendar-day p-2 text-center bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded" title="Vacation Leave - Approved">23</div>
              <div class="calendar-day p-2 text-center">24</div>
              <div class="calendar-day p-2 text-center">25</div>
              <div class="calendar-day p-2 text-center">26</div>
              <div class="calendar-day p-2 text-center">27</div>
              <div class="calendar-day p-2 text-center">28</div>
              <div class="calendar-day p-2 text-center">29</div>
              <div class="calendar-day p-2 text-center">30</div>
              <div class="calendar-day p-2 text-center text-gray-400">1</div>
              <div class="calendar-day p-2 text-center text-gray-400">2</div>
            </div>
            <div class="flex items-center justify-center gap-4 mt-4 text-xs">
              <div class="flex items-center gap-1">
                <div class="w-3 h-3 bg-blue-500 rounded"></div>
                <span>Approved</span>
              </div>
              <div class="flex items-center gap-1">
                <div class="w-3 h-3 bg-amber-500 rounded"></div>
                <span>Pending</span>
              </div>
              <div class="flex items-center gap-1">
                <div class="w-3 h-3 bg-red-500 rounded"></div>
                <span>Declined</span>
              </div>
            </div>
          </div>

        </div>

        <!-- Right Column (calendar removed for balance) -->
        <div class="space-y-6">
          <!-- Feature 3: Leave Balance Tracker -->
          <div class="glass rounded-3xl p-6 shadow-lg reveal">
            <h2 class="text-xl font-bold mb-4">Leave Balance</h2>
            <div class="space-y-4">
              <div class="p-4 leave-vacation rounded-xl">
                <div class="flex justify-between items-center mb-2">
                  <span class="font-medium text-blue-800 dark:text-blue-300">Vacation Leave</span>
                  <span class="text-sm text-blue-600 dark:text-blue-400">15 days/year</span>
                </div>
                <div class="w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2">
                  <div class="bg-blue-500 h-2 rounded-full" style="width: 60%"></div>
                </div>
                <div class="flex justify-between text-xs mt-1">
                  <span class="text-blue-600 dark:text-blue-400">9 days used</span>
                  <span class="text-blue-600 dark:text-blue-400">6 days remaining</span>
                </div>
              </div>
              <div class="p-4 leave-sick rounded-xl">
                <div class="flex justify-between items-center mb-2">
                  <span class="font-medium text-amber-800 dark:text-amber-300">Sick Leave</span>
                  <span class="text-sm text-amber-600 dark:text-amber-400">10 days/year</span>
                </div>
                <div class="w-full bg-amber-200 dark:bg-amber-800 rounded-full h-2">
                  <div class="bg-amber-500 h-2 rounded-full" style="width: 30%"></div>
                </div>
                <div class="flex justify-between text-xs mt-1">
                  <span class="text-amber-600 dark:text-amber-400">3 days used</span>
                  <span class="text-amber-600 dark:text-amber-400">7 days remaining</span>
                </div>
              </div>
              <div class="p-4 leave-emergency rounded-xl">
                <div class="flex justify-between items-center mb-2">
                  <span class="font-medium text-red-800 dark:text-red-300">Emergency Leave</span>
                  <span class="text-sm text-red-600 dark:text-red-400">5 days/year</span>
                </div>
                <div class="w-full bg-red-200 dark:bg-red-800 rounded-full h-2">
                  <div class="bg-red-500 h-2 rounded-full" style="width: 20%"></div>
                </div>
                <div class="flex justify-between text-xs mt-1">
                  <span class="text-red-600 dark:text-red-400">1 day used</span>
                  <span class="text-red-600 dark:text-red-400">4 days remaining</span>
                </div>
              </div>
              <div class="p-4 leave-official rounded-xl">
                <div class="flex justify-between items-center mb-2">
                  <span class="font-medium text-purple-800 dark:text-purple-300">Official Business</span>
                  <span class="text-sm text-purple-600 dark:text-purple-400">Unlimited</span>
                </div>
                <div class="w-full bg-purple-200 dark:bg-purple-800 rounded-full h-2">
                  <div class="bg-purple-500 h-2 rounded-full" style="width: 45%"></div>
                </div>
                <div class="flex justify-between text-xs mt-1">
                  <span class="text-purple-600 dark:text-purple-400">9 days used</span>
                  <span class="text-purple-600 dark:text-purple-400">Unlimited</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Feature 6: AI Leave Insight Summary -->
          <div class="glass rounded-3xl p-6 shadow-lg reveal">
            <h2 class="text-xl font-bold mb-4">AI Leave Insights</h2>
            <div class="space-y-4">
              <div class="p-4 bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/20 rounded-xl border border-blue-200 dark:border-blue-700">
                <div class="flex items-start gap-3">
                  <iconify-icon icon="ph:trend-up-duotone" class="text-blue-500 mt-1"></iconify-icon>
                  <div>
                    <p class="font-medium text-blue-800 dark:text-blue-300">You've used 60% of your vacation leave this quarter.</p>
                    <p class="text-sm text-blue-600 dark:text-blue-400 mt-1">Consider planning remaining days strategically.</p>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-700">
                <div class="flex items-start gap-3">
                  <iconify-icon icon="ph:check-circle-duotone" class="text-green-500 mt-1"></iconify-icon>
                  <div>
                    <p class="font-medium text-green-800 dark:text-green-300">No sick leave used this month — great attendance consistency.</p>
                    <p class="text-sm text-green-600 dark:text-green-400 mt-1">Keep maintaining your health!</p>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-gradient-to-br from-amber-50 to-yellow-100 dark:from-amber-900/30 dark:to-yellow-900/20 rounded-xl border border-amber-200 dark:border-amber-700">
                <div class="flex items-start gap-3">
                  <iconify-icon icon="ph:calendar-blank-duotone" class="text-amber-500 mt-1"></iconify-icon>
                  <div>
                    <p class="font-medium text-amber-800 dark:text-amber-300">You have 3 pending leave requests.</p>
                    <p class="text-sm text-amber-600 dark:text-amber-400 mt-1">Average approval time: 2-3 business days.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <!-- Feature 10: Leave Approval Notifications -->
          <div class="glass rounded-3xl p-6 shadow-lg reveal">
            <div class="flex items-center justify-between mb-4">
              <h2 class="text-xl font-bold">Leave Notifications</h2>
              <span class="px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full">2 new</span>
            </div>
            <div class="space-y-3 max-h-60 overflow-y-auto fancy-scroll">
              <div class="flex items-start gap-3 p-3 bg-green-50 dark:bg-green-900/30 rounded-xl">
                <div class="w-8 h-8 rounded-full bg-green-500 flex items-center justify-center text-white flex-shrink-0">
                  <iconify-icon icon="ph:check-circle-duotone"></iconify-icon>
                </div>
                <div class="flex-1">
                  <p class="text-sm font-medium">Leave Request Approved</p>
                  <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Your sick leave for November 14 has been approved.</p>
                  <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">2 hours ago</p>
                </div>
              </div>
              <div class="flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-xl">
                <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white flex-shrink-0">
                  <iconify-icon icon="ph:clock-duotone"></iconify-icon>
                </div>
                <div class="flex-1">
                  <p class="text-sm font-medium">New Leave Request</p>
                  <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Your vacation request for December is pending approval.</p>
                  <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">1 day ago</p>
                </div>
              </div>
              <div class="flex items-start gap-3 p-3 bg-amber-50 dark:bg-amber-900/30 rounded-xl">
                <div class="w-8 h-8 rounded-full bg-amber-500 flex items-center justify-center text-white flex-shrink-0">
                  <iconify-icon icon="ph:info-duotone"></iconify-icon>
                </div>
                <div class="flex-1">
                  <p class="text-sm font-medium">Document Required</p>
                  <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Please upload medical certificate for your sick leave.</p>
                  <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">3 days ago</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Feature 14: Leave Request Analytics -->
      <div class="glass rounded-3xl p-6 shadow-lg reveal">
        <h2 class="text-xl font-bold mb-4">Leave Analytics</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="p-6 bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/20 rounded-2xl border border-blue-200 dark:border-blue-700">
            <h3 class="font-bold text-blue-800 dark:text-blue-300 mb-4">Leave Distribution</h3>
            <div class="h-64">
              <canvas id="leaveDistributionChart"></canvas>
            </div>
          </div>
          <div class="p-6 bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/20 rounded-2xl border border-green-200 dark:border-green-700">
            <h3 class="font-bold text-green-800 dark:text-green-300 mb-4">Monthly Trend</h3>
            <div class="h-64">
              <canvas id="leaveTrendChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Feature 15: Leave Policy Viewer -->
      <div class="glass rounded-3xl p-6 shadow-lg reveal">
        <h2 class="text-xl font-bold mb-4">Leave Policies</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="p-4 bg-blue-50 dark:bg-blue-900/30 rounded-xl">
            <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white mb-3">
              <iconify-icon icon="ph:beach-duotone"></iconify-icon>
            </div>
            <h3 class="font-bold text-blue-800 dark:text-blue-300 mb-2">Vacation Leave</h3>
            <p class="text-sm text-blue-600 dark:text-blue-400">15 days per year, accrues monthly</p>
            <p class="text-xs text-blue-500 dark:text-blue-500 mt-2">Can be carried over up to 5 days</p>
          </div>
          <div class="p-4 bg-amber-50 dark:bg-amber-900/30 rounded-xl">
            <div class="w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center text-white mb-3">
              <iconify-icon icon="ph:first-aid-duotone"></iconify-icon>
            </div>
            <h3 class="font-bold text-amber-800 dark:text-amber-300 mb-2">Sick Leave</h3>
            <p class="text-sm text-amber-600 dark:text-amber-400">10 days per year, requires medical certificate after 3 days</p>
            <p class="text-xs text-amber-500 dark:text-amber-500 mt-2">No carry over allowed</p>
          </div>
          <div class="p-4 bg-red-50 dark:bg-red-900/30 rounded-xl">
            <div class="w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white mb-3">
              <iconify-icon icon="ph:warning-circle-duotone"></iconify-icon>
            </div>
            <h3 class="font-bold text-red-800 dark:text-red-300 mb-2">Emergency Leave</h3>
            <p class="text-sm text-red-600 dark:text-red-400">5 days per year for family emergencies</p>
            <p class="text-xs text-red-500 dark:text-red-500 mt-2">Requires immediate supervisor approval</p>
          </div>
          <div class="p-4 bg-purple-50 dark:bg-purple-900/30 rounded-xl">
            <div class="w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-white mb-3">
              <iconify-icon icon="ph:briefcase-duotone"></iconify-icon>
            </div>
            <h3 class="font-bold text-purple-800 dark:text-purple-300 mb-2">Official Business</h3>
            <p class="text-sm text-purple-600 dark:text-purple-400">No limit for company-related activities</p>
            <p class="text-xs text-purple-500 dark:text-purple-500 mt-2">Requires prior department head approval</p>
          </div>
        </div>
      </div>

      <!-- Feature 13: HR Contact or Clarification Form -->
      <div class="glass rounded-3xl p-6 shadow-lg reveal">
        <h2 class="text-xl font-bold mb-4">Contact HR</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Subject</label>
              <select class="w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 glass py-3 px-4">
                <option value="">Select subject...</option>
                <option value="policy">Leave Policy Clarification</option>
                <option value="balance">Leave Balance Inquiry</option>
                <option value="application">Application Issues</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Message</label>
              <textarea class="w-full rounded-xl border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 glass py-3 px-4" rows="4" placeholder="Describe your question or concern..."></textarea>
            </div>
            <button class="w-full px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition-all ripple">
              Send Message to HR
            </button>
          </div>
          <div class="p-6 bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/20 rounded-2xl border border-green-200 dark:border-green-700">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white">
                <iconify-icon icon="ph:headset-duotone"></iconify-icon>
              </div>
              <div>
                <h3 class="font-bold text-green-800 dark:text-green-300">HR Support</h3>
                <p class="text-sm text-green-600 dark:text-green-400">We're here to help</p>
              </div>
            </div>
            <div class="space-y-2 text-sm">
              <div class="flex items-center gap-2">
                <iconify-icon icon="ph:clock-duotone" class="text-green-500"></iconify-icon>
                <span class="text-green-700 dark:text-green-300">Response Time: 24-48 hours</span>
              </div>
              <div class="flex items-center gap-2">
                <iconify-icon icon="ph:envelope-duotone" class="text-green-500"></iconify-icon>
                <span class="text-green-700 dark:text-green-300">hr-support@company.com</span>
              </div>
              <div class="flex items-center gap-2">
                <iconify-icon icon="ph:phone-duotone" class="text-green-500"></iconify-icon>
                <span class="text-green-700 dark:text-green-300">+1 (555) 123-4567</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer class="pb-8 pt-2 text-xs text-gray-500 dark:text-gray-400 text-center">© IntelliHRTrack • Leave & Requests Portal</footer>
    </main>
    <script>
    // Active link highlighter (filename based)
    (function(){const file=location.pathname.split('/').pop();document.querySelectorAll('aside nav a').forEach(a=>{const href=a.getAttribute('href');if(!href) return; if(href===file){a.classList.add('gradient-accent','text-white','shadow-glow');a.classList.remove('glass');} else {a.classList.remove('gradient-accent','text-white');if(!a.classList.contains('glass')) a.classList.add('glass');}});})();
    // Theme toggle hookup
    (function(){function save(){localStorage.setItem('ih_theme',document.documentElement.classList.contains('dark')?'dark':'light');}['themeToggle','themeToggleHeader'].forEach(id=>{const el=document.getElementById(id);if(el){el.addEventListener('click',()=>{document.documentElement.classList.toggle('dark');save();});}});})();
    </script>
  </div>

  <!-- Settings Modal -->
  <div id="settingsPanel" class="fixed inset-0 hidden items-center justify-center p-4 z-50">
    <div class="absolute inset-0 bg-slate-900/50 backdrop-blur-sm"></div>
    <div class="relative z-10 w-full max-w-lg glass rounded-2xl p-6 shadow-glow">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold flex items-center gap-2"><iconify-icon icon="ph:sliders-duotone" class="text-accent"></iconify-icon> Customize Layout</h3>
        <button id="closeSettings" class="p-2 rounded-xl glass hover:shadow-glow"><iconify-icon icon="ph:x-duotone"></iconify-icon></button>
      </div>
      <div class="neon-divider my-4"></div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="space-y-2">
          <div class="text-xs uppercase tracking-wide text-gray-500">Accent color</div>
          <div class="flex gap-2">
            <button data-accent="teal" class="w-10 h-10 rounded-xl border-2 border-white/60" style="background:#14b8a6"></button>
            <button data-accent="purple" class="w-10 h-10 rounded-xl border-2 border-white/60" style="background:#8b5cf6"></button>
            <button data-accent="rose" class="w-10 h-10 rounded-xl border-2 border-white/60" style="background:#f43f5e"></button>
            <button data-accent="amber" class="w-10 h-10 rounded-xl border-2 border-white/60" style="background:#f59e0b"></button>
          </div>
        </div>
        <div class="space-y-2">
          <div class="text-xs uppercase tracking-wide text-gray-500">Background</div>
          <div class="flex gap-2">
            <button data-bg="gradient" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Gradient</button>
            <button data-bg="image" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Image</button>
          </div>
        </div>
        <div class="space-y-2">
          <div class="text-xs uppercase tracking-wide text-gray-500">Density</div>
          <div class="flex gap-2">
            <button data-density="comfortable" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Comfortable</button>
            <button data-density="compact" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Compact</button>
            <button data-density="relaxed" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Relaxed</button>
          </div>
        </div>
        <div class="space-y-2">
          <div class="text-xs uppercase tracking-wide text-gray-500">Motion</div>
          <label class="flex items-center gap-2 text-sm"><input id="motionToggle" type="checkbox" class="w-4 h-4"> Reduce motion</label>
        </div>
        <div class="space-y-2">
          <div class="text-xs uppercase tracking-wide text-gray-500">Glass intensity</div>
          <input id="glassIntensity" type="range" min="0.3" max="0.9" step="0.05" value="0.6" class="w-full" />
          <div class="text-xs text-gray-500">Adjust card transparency</div>
        </div>
        <div class="space-y-2">
          <div class="text-xs uppercase tracking-wide text-gray-500">Sidebar width</div>
          <div class="flex gap-2 flex-wrap">
            <button data-sidebar="narrow" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Narrow</button>
            <button data-sidebar="default" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Default</button>
            <button data-sidebar="wide" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Wide</button>
          </div>
        </div>
        <div class="space-y-2">
          <div class="text-xs uppercase tracking-wide text-gray-500">High contrast</div>
          <label class="flex items-center gap-2 text-sm"><input id="contrastToggle" type="checkbox" class="w-4 h-4"> Enable high contrast</label>
        </div>
        <div class="space-y-2">
          <div class="text-xs uppercase tracking-wide text-gray-500">Font size</div>
          <div class="flex gap-2">
            <button data-font="small" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Small</button>
            <button data-font="base" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Base</button>
            <button data-font="large" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Large</button>
          </div>
        </div>
      </div>
      <div class="mt-4">
        <div class="text-xs uppercase tracking-wide text-gray-500 mb-2">Preferences</div>
        <div class="flex items-center gap-2 flex-wrap">
          <button id="exportPrefs" class="px-3 py-2 rounded-xl glass hover:shadow-glow flex items-center gap-2"><iconify-icon icon="ph:arrow-square-out-duotone"></iconify-icon> Export</button>
          <button id="importPrefsBtn" class="px-3 py-2 rounded-xl glass hover:shadow-glow flex items-center gap-2"><iconify-icon icon="ph:arrow-square-in-duotone"></iconify-icon> Import</button>
          <input id="prefsFile" type="file" accept="application/json" class="hidden" />
        </div>
      </div>
      <div class="mt-6 flex justify-end gap-2">
        <button id="resetSettings" class="px-3 py-2 rounded-xl glass hover:shadow-glow">Reset</button>
        <button id="saveSettings" class="px-3 py-2 rounded-xl text-white bg-accent hover:shadow-glow">Save</button>
      </div>
    </div>
  </div>

  <!-- Shortcuts Cheatsheet -->
  <div id="shortcutsModal" class="fixed inset-0 hidden items-center justify-center p-6 z-[76]">
    <div class="absolute inset-0 bg-slate-900/50 backdrop-blur-sm"></div>
    <div class="relative z-10 w-full max-w-xl glass rounded-2xl p-6">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold flex items-center gap-2"><iconify-icon icon="ph:keyboard-duotone" class="text-accent"></iconify-icon> Keyboard Shortcuts</h3>
        <button id="closeShortcuts" class="p-2 rounded-xl glass"><iconify-icon icon="ph:x-duotone"></iconify-icon></button>
      </div>
      <div class="neon-divider my-4"></div>
      <ul class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
        <li class="glass rounded-xl p-3"><strong>Ctrl + K</strong> — Command Palette</li>
        <li class="glass rounded-xl p-3"><strong>S</strong> — Open Settings</li>
        <li class="glass rounded-xl p-3"><strong>T</strong> — Toggle Theme</li>
        <li class="glass rounded-xl p-3"><strong>?</strong> — This Cheatsheet</li>
      </ul>
    </div>
  </div>

  <!-- Toast Host + Back to Top -->
  <div id="toastHost" aria-live="polite"></div>
  <button id="backToTop" class="hidden fixed bottom-6 right-6 px-3 py-2 rounded-xl glass gradient-accent text-white">Top</button>

  <!-- Mobile Sidebar -->
  <div id="mobileSidebar" class="fixed inset-0 z-[85] hidden">
    <div id="mobileBackdrop" class="absolute inset-0 bg-slate-900/50"></div>
    <aside id="mobilePanel" class="absolute left-0 top-0 h-full w-72 p-4 pr-3 glass overflow-y-auto transform -translate-x-full transition-transform duration-300">
      <div class="flex items-center justify-between mb-3">
        <div class="font-semibold">Menu</div>
        <button id="closeMobile" class="p-2 rounded-xl glass"><iconify-icon icon="ph:x-duotone"></iconify-icon></button>
      </div>
      <div id="mobileNavContent" class="space-y-2"></div>
    </aside>
  </div>

  <script>
    // ---------- THEME ----------
    const themeToggle = document.getElementById('themeToggle');
    const themeToggleHeader = document.getElementById('themeToggleHeader');
    function toggleTheme(){
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('ih_theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
    }
    themeToggle?.addEventListener('click', toggleTheme);
    themeToggleHeader?.addEventListener('click', toggleTheme);
    if (localStorage.getItem('ih_theme') === 'dark') document.documentElement.classList.add('dark');

    // ---------- CLOCK + NETWORK STATUS ----------
    const headerClock = document.getElementById('headerClock');
    const netDot = document.getElementById('netDot');
    function updateClock(){ if(headerClock) headerClock.textContent = new Date().toLocaleTimeString(); }
    setInterval(updateClock, 1000); updateClock();
    function updateNet(){ const on = navigator.onLine; if(netDot){ netDot.classList.toggle('bg-green-500', on); netDot.classList.toggle('bg-rose-500', !on); netDot.title = on ? 'Online' : 'Offline'; } }
    window.addEventListener('online', updateNet); window.addEventListener('offline', updateNet); updateNet();

    // ---------- SETTINGS PANEL ----------
    const customizeBtn = document.getElementById('customizeLayout');
    const settingsPanel = document.getElementById('settingsPanel');
    const closeSettings = document.getElementById('closeSettings');
    const saveSettings = document.getElementById('saveSettings');
    const resetSettings = document.getElementById('resetSettings');
    const motionToggle = document.getElementById('motionToggle');

    function openSettings(){ settingsPanel.classList.remove('hidden'); settingsPanel.classList.add('flex'); }
    function closeSettingsFn(){ settingsPanel.classList.add('hidden'); settingsPanel.classList.remove('flex'); }
    customizeBtn?.addEventListener('click', openSettings);
    closeSettings?.addEventListener('click', closeSettingsFn);
    settingsPanel?.addEventListener('click', (e)=>{ if(e.target === settingsPanel) closeSettingsFn(); });

    const accentBtns = Array.from(document.querySelectorAll('#settingsPanel [data-accent]'));
    const bgBtns = Array.from(document.querySelectorAll('#settingsPanel [data-bg]'));
    const densityBtns = Array.from(document.querySelectorAll('#settingsPanel [data-density]'));

    function getPrefs(){ try{ return JSON.parse(localStorage.getItem('ih_prefs')) || {}; }catch{ return {}; } }
    function setPrefs(p){ localStorage.setItem('ih_prefs', JSON.stringify(p)); }
    function applyPrefs(p){
      if(p.accent) document.documentElement.setAttribute('data-accent', p.accent);
      if(p.bg) document.documentElement.setAttribute('data-bg', p.bg);
      document.documentElement.setAttribute('data-density', p.density||'comfortable');
      document.documentElement.classList.toggle('reduce-motion', !!p.reduceMotion);
      if(motionToggle) motionToggle.checked = !!p.reduceMotion;
    }
    const initPrefs = getPrefs(); applyPrefs(initPrefs);
    accentBtns.forEach(b=> b.addEventListener('click', ()=> document.documentElement.setAttribute('data-accent', b.dataset.accent)));
    bgBtns.forEach(b=> b.addEventListener('click', ()=> document.documentElement.setAttribute('data-bg', b.dataset.bg)));
    densityBtns.forEach(b=> b.addEventListener('click', ()=> document.documentElement.setAttribute('data-density', b.dataset.density)));
    saveSettings?.addEventListener('click', ()=>{
      const prev = getPrefs();
      const p = {
        accent: document.documentElement.getAttribute('data-accent'),
        bg: document.documentElement.getAttribute('data-bg'),
        density: document.documentElement.getAttribute('data-density'),
        reduceMotion: motionToggle && motionToggle.checked,
        glass: glassIntensity ? glassIntensity.value : (prev.glass||'0.6'),
        sidebar: (prev.sidebar)||'default',
        contrast: contrastToggle ? contrastToggle.checked : !!prev.contrast,
        font: document.documentElement.getAttribute('data-font') || prev.font || 'base'
      };
      const activeSidebar = document.activeElement && document.activeElement.getAttribute('data-sidebar');
      if(activeSidebar) p.sidebar = activeSidebar;
      setPrefs(p); applyPrefs(p); applyPrefsExtended(p); closeSettingsFn();
    });
    resetSettings?.addEventListener('click', ()=>{ const p = {accent:'teal', bg:'gradient', density:'comfortable', reduceMotion:false}; setPrefs(p); applyPrefs(p); });

    // ---------- TOASTS ----------
    const toastHost = document.getElementById('toastHost');
    function showToast(msg, type='info'){
      if(!toastHost) return;
      const item = document.createElement('div');
      item.className = `toast ${type==='success'?'success':type==='warning'?'warn':type==='error'?'error':'info'} glass`;
      item.innerHTML = `<div class="flex items-start gap-2">
        <iconify-icon icon="${type==='success'?'ph:check-circle-duotone':type==='warning'?'ph:warning-duotone':type==='error'?'ph:x-circle-duotone':'ph:info-duotone'}" class="mt-0.5 text-accent"></iconify-icon>
        <div class="text-sm">${msg}</div>
      </div>`;
      toastHost.appendChild(item);
      setTimeout(()=>{ item.style.transition='opacity .4s ease, transform .4s ease'; item.style.opacity='0'; item.style.transform='translateY(-6px)'; }, 2600);
      setTimeout(()=> item.remove(), 3100);
    }
    setTimeout(()=>{ try{ showToast('Leave & Requests ready','success'); }catch(_){} }, 700);

    // ---------- BACK TO TOP ----------
    const backToTop = document.getElementById('backToTop');
    window.addEventListener('scroll', ()=>{ if(window.scrollY > 400) backToTop?.classList.remove('hidden'); else backToTop?.classList.add('hidden'); });
    backToTop?.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

    // ---------- SHORTCUTS MODAL ----------
    const shortcutsModal = document.getElementById('shortcutsModal');
    const shortcutsBtn = document.getElementById('shortcutsBtn');
    const closeShortcuts = document.getElementById('closeShortcuts');
    function openShortcuts(){ shortcutsModal.classList.remove('hidden'); shortcutsModal.classList.add('flex'); }
    function closeShortcutsFn(){ shortcutsModal.classList.add('hidden'); shortcutsModal.classList.remove('flex'); }
    shortcutsBtn?.addEventListener('click', openShortcuts);
    closeShortcuts?.addEventListener('click', closeShortcutsFn);
    shortcutsModal?.addEventListener('click', (e)=>{ if(e.target===shortcutsModal) closeShortcutsFn(); });
    document.addEventListener('keydown', (e)=>{
      if(e.target && ['INPUT','TEXTAREA'].includes(e.target.tagName)) return;
      if(e.key.toLowerCase()==='s'){ e.preventDefault(); openSettings(); }
      if(e.key.toLowerCase()==='t'){ e.preventDefault(); toggleTheme(); }
      if(e.key === '?'){ e.preventDefault(); openShortcuts(); }
    });

    // ---------- MOBILE SIDEBAR ----------
    const mobileMenuBtn = document.getElementById('mobileMenu');
    const mobileSidebar = document.getElementById('mobileSidebar');
    const mobilePanel = document.getElementById('mobilePanel');
    const mobileBackdrop = document.getElementById('mobileBackdrop');
    const mobileClose = document.getElementById('closeMobile');
    const mobileNavContent = document.getElementById('mobileNavContent');
    function openMobile(){
      const desk = document.querySelector('aside nav ul');
      if(desk && mobileNavContent){ mobileNavContent.innerHTML=''; mobileNavContent.appendChild(desk.cloneNode(true));
        mobileNavContent.querySelectorAll('a').forEach(a=>{
          a.addEventListener('click', ()=>{ closeMobile(); });
        });
      }
      mobileSidebar.classList.remove('hidden');
      requestAnimationFrame(()=> mobilePanel.classList.remove('-translate-x-full'));
    }
    function closeMobile(){ mobilePanel.classList.add('-translate-x-full'); setTimeout(()=> mobileSidebar.classList.add('hidden'), 250); }
    mobileMenuBtn?.addEventListener('click', openMobile);
    mobileBackdrop?.addEventListener('click', closeMobile);
    mobileClose?.addEventListener('click', closeMobile);

    // ---------- MICRO-INTERACTIONS ----------
    Array.from(document.querySelectorAll('.glass')).forEach(el=> el.classList.add('hover-lift'));
    Array.from(document.querySelectorAll('button')).forEach(el=> el.classList.add('ripple'));

    // ---------- REVEAL ON SCROLL ----------
    const revealables = Array.from(document.querySelectorAll('.reveal'));
    const io = new IntersectionObserver(entries=>{ entries.forEach(en=>{ if(en.isIntersecting){ en.target.classList.add('in-view'); io.unobserve(en.target); } }); }, { threshold: 0.12 });
    revealables.forEach(el=> io.observe(el));

    // ---------- PREFS EXTENDED ----------
    const glassIntensity = document.getElementById('glassIntensity');
    const contrastToggle = document.getElementById('contrastToggle');
    const sidebarBtns = Array.from(document.querySelectorAll('#settingsPanel [data-sidebar]'));
    const fontBtns = Array.from(document.querySelectorAll('#settingsPanel [data-font]'));
    function applyGlass(val){ const alpha = parseFloat(val||'0.6'); document.documentElement.style.setProperty('--card-bg', `rgba(255,255,255,${alpha})`); document.documentElement.style.setProperty('--card-border', `rgba(255,255,255,${Math.max(0, Math.min(1, alpha*0.6))})`); }
    function applySidebar(size){ const map = { narrow:'14rem', default:'18rem', wide:'22rem' }; const px = map[size] || map.default; document.documentElement.style.setProperty('--sidebar', px); }
    function applyFont(f){ const size = f==='small'? '0.95rem' : f==='large'? '1.05rem' : '1rem'; document.documentElement.setAttribute('data-font', f||'base'); document.body.style.fontSize = size; }
    function applyPrefsExtended(p){ if(p.glass) applyGlass(p.glass); if(p.sidebar) applySidebar(p.sidebar); if(p.contrast) document.documentElement.classList.toggle('high-contrast', !!p.contrast); if(p.font) applyFont(p.font); if(glassIntensity) glassIntensity.value = p.glass || '0.6'; if(contrastToggle) contrastToggle.checked = !!p.contrast; }
    applyPrefsExtended(getPrefs());
    sidebarBtns.forEach(b=> b.addEventListener('click', ()=> applySidebar(b.dataset.sidebar)));
    fontBtns.forEach(b=> b.addEventListener('click', ()=> applyFont(b.dataset.font)));
    glassIntensity?.addEventListener('input', ()=> applyGlass(glassIntensity.value));
    contrastToggle?.addEventListener('change', ()=> document.documentElement.classList.toggle('high-contrast', contrastToggle.checked));

    // ---------- LEAVE PAGE LOGIC ----------
    // Charts
    try {
      const distributionCtx = document.getElementById('leaveDistributionChart')?.getContext('2d');
      if(distributionCtx){
        new Chart(distributionCtx, {
          type: 'doughnut',
          data: {
            labels: ['Vacation', 'Sick', 'Emergency', 'Official'],
            datasets: [{ data: [9,3,1,5], backgroundColor: ['#3b82f6','#f59e0b','#ef4444','#8b5cf6'], borderWidth: 0 }]
          },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
        });
      }
      const trendCtx = document.getElementById('leaveTrendChart')?.getContext('2d');
      if(trendCtx){
        new Chart(trendCtx, {
          type: 'line',
          data: {
            labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov'],
            datasets: [{ label: 'Leave Days', data: [2,1,3,2,1,4,2,1,5,1,2], borderColor: '#10b981', backgroundColor: 'rgba(16,185,129,0.1)', tension: 0.3, fill: true }]
          },
          options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
        });
      }
    } catch(e){}

    // Date validation
    const startDateInput = document.querySelector('input[type="date"]');
    const endDateInput = document.querySelectorAll('input[type="date"]')[1];
    function validateDates(){ if(startDateInput?.value && endDateInput?.value){ const s=new Date(startDateInput.value); const e=new Date(endDateInput.value); if(e < s){ alert('End date cannot be before start date'); endDateInput.value=''; } } }
    startDateInput?.addEventListener('change', validateDates);
    endDateInput?.addEventListener('change', validateDates);

    // Cancel request buttons
    document.querySelectorAll('.text-red-500').forEach(btn=>{
      btn.addEventListener('click', function(){
        const row = this.closest('tr');
        const leaveType = row.querySelector('td:first-child span')?.textContent || 'leave';
        const dates = row.querySelector('td:nth-child(2)')?.textContent || '';
        if(confirm(`Are you sure you want to cancel your ${leaveType} for ${dates}?`)){
          row.style.opacity='0.5'; this.textContent='Cancelling...'; this.disabled=true;
          setTimeout(()=>{ row.remove(); try{ showToast('Leave request cancelled','success'); }catch(_){} }, 1200);
        }
      });
    });
  </script>
</body>
</html>